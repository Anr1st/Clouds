# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3
## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?
–ù–∞—à–µ–π –∑–∞–¥–∞—á–µ–π –±—ã–ª–æ –Ω–∞–ø–∏—Å–∞—Ç—å "–ø–ª–æ—Ö–æ–π" –∏ "—Ö–æ—Ä–æ—à–∏–π" CI/CD —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–∏—Å–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ —Ç—Ä–µ—Ö bad practices –∏ –∫–∞–∫ –º—ã –∏—Ö –∏—Å–ø—Ä–∞–≤–∏–ª–∏ –≤–¥–∞–ª—å–Ω–µ–π—à–µ–º. –ê —Ç–∞–∫–∂–µ, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—É–Ω–∫—Ç—ã 1-4 –∏–∑ –∫–µ–π—Å–∞ ‚Ññ5

–†—É–±—Ä–∏–∫–∞: –æ–±—ä—è—Å–Ω—è–µ–º –Ω–∞ –∫–æ—Ç—è—Ç–∞—Öüêà

![cat](/kotyata/–∫–æ—Ç4.jpg)

# –ß–∞—Å—Ç—å 1

## "–ü–ª–æ—Ö–æ–π" CI/CD —Ñ–∞–π–ª
```
name: Bad CI/CD

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm run test

      - name: Build the project
        run: npm run build

      - name: Deploy the project
        run: |
          echo "Deploying the project..."
```

## "–•–æ—Ä–æ—à–∏–π" CI/CD —Ñ–∞–π–ª
```
name: Good CI/CD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Cache node_modules
        uses: actions/cache@v4
        with:
          path: ~/.npm
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
          restore-keys: |
            ${{ runner.os }}-node-

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm run test

  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Deploy the project
        run: |
          echo "Deploying the project..."
        env:
          DEPLOY_SECRET: ${{ secrets.DEPLOY_SECRET }}
```

## –ö–æ—Ç—è—Ç–∞ –æ–±—ä—è—Å–Ω—è—é—Ç!
### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**‚ùåTrouble:** –í –ø–µ—Ä–≤–æ–º —Ñ–∞–π–ª–µ CI/CD –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏.

**‚úÖSolution:** –í–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `actions/cache`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É —Å–±–æ—Ä–∫–∞–º–∏ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å!

```yaml
- name: Cache node_modules
  uses: actions/cache@v2
  with:
    path: ~/.npm
    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
    restore-keys: |
      ${{ runner.os }}-node-
```

![cat](/kotyata/–∫–æ—Ç–±–µ–∂–∏—Ç.jpg)

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**‚ùåTrouble:** –í –ø–µ—Ä–≤–æ–º —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `npm install` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –û–Ω–∞ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

**‚úÖSolution:** –í–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É `npm ci`, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–º–µ–Ω–Ω–æ —Ç–µ—Ö –≤–µ—Ä—Å–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ `package-lock.json`, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –±—ã—Å—Ç—Ä—ã–ºüöÄ

```yaml
- name: Install dependencies
  run: npm ci
```


### 3. –•—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏

**‚ùåTrouble:** –í –ø–µ—Ä–≤–æ–º —Ñ–∞–π–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏, —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —ç—Ç–∞–ø–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –¥–µ–ø–ª–æ–µ.

**‚úÖSolution:** –í–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–∞—Ö CI/CDüòé

```yaml
- name: Save build artifacts
  uses: actions/upload-artifact@v3
  with:
    name: build-artifacts
    path: ./dist
```
![cat](/kotyata/–∫–æ—Ç–æ—Ä–µ—Ç.jpg)

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –¥–µ–ø–ª–æ—è

**‚ùåTrouble:** –í –ø–µ—Ä–≤–æ–º —Ñ–∞–π–ª–µ –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏üòü

**‚úÖSolution:** –í–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –¥–µ–ø–ª–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏—Ö –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Öü§≠

```yaml
- name: Deploy the project
  run: echo "Deploying the project..."
  env:
    DEPLOY_SECRET: ${{ secrets.DEPLOY_SECRET }}
```

![cat](/kotyata/–∫–æ—Ç2.jpg) *–∑–ª–æ—É–º—ã—à–µ–Ω–Ω–∏–∫*

### 5. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏

**‚ùåTrouble:** –í –ø–µ—Ä–≤–æ–º —Ñ–∞–π–ª–µ —Å—Ç–∞–¥–∏–∏ `test` –∏ `deploy` –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤. 

**‚úÖSolution:** –í–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é `needs`, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç (—Å—Ç–æ–ø—É–¥–Ω—è–∫), —á—Ç–æ –¥–µ–ø–ª–æ–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤üí™

```yaml
jobs:
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Deploy the project
        run: echo "Deploying the project..."
```


## –ß—Ç–æ –º—ã –∏–º–µ–µ–º?

### –ü–∞–π–ø–ª–∞–π–Ω "–ø–ª–æ—Ö–æ–≥–æ" CI/CD:

![omg](/kotyata/baaad.png)

### –ü–∞–π–ø–ª–∞–π–Ω "—Ö–æ—Ä–æ—à–µ–≥–æ" CI/CD:

![omg](/kotyata/goooood.png)


# –ß–∞—Å—Ç—å 2
–ß–∞—Å—Ç—å 2 —Å–º. –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ—Ç—á–µ—Ç–µ –≤ –ø–∞–ø–∫–µ `solutions` Case ‚Ññ5!

![cat](/kotyata/–∫–æ—Ç1.jpg)